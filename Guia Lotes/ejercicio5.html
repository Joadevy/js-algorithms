<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercise 5</title>
</head>
<body>
    <script>
        // Block with cars information: this represent a register of related information linked by the car number that is on the array'codigos'.
        var codigos = [1234,2235,7521,8592,7653,9090,1534,2175,1025,1875,8575,4321,5789,3456,8765,5555,8888,6544,5554,9899]; // Array with car codes, each code is for one different car.
        var categorias = [2,5,1,3,4,5,10,8,1,2,3,4,5,10,7,6,1,4,7,8]; // Categories of each car of 'codigos' (1-10)
        var ppkm = [1.5,4,1,2.2,3.5,4,5,4.25,1,1.5,2.2,3.5,4,5,4.15,4.05,1,3.5,4.15,4.25]; // Price per kilometer depending on the category of the car.
        var agencia = [1,5,4,3,2,3,5,1,5,4,2,1,3,2,2,3,5,2,1,4]; // Number of each agency (1-5)
        var ubicacion = [1,2,2,3,1]; // Location of the agencies are in only 3 distrites (1-3)

        // Block with arrays of processing. They are all initialized in 0 and ready for acumullate info to be provided by the user.
        var recaud = [0,0,0]; // Array for acumulate the total collected in the 3 locations of the different rental agencies.
        var cantAlquileres = [0,0,0,0,0,0,0,0,0,0]; // Array to count total rentals.
        var autosPA = [0,0,0,0,0]; // Array for controlling the cars per rental agency.
        var catMA = [0,0,0,0,0,0,0,0,0,0]; // Array for acumulate the amount of categories per rented car.
        var clientes = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]; // Array for acumulate the traveled KM of 20 clients.

        main();

        function main() {
            carga(); // Classifies and loads the 'autosPA' array.
            proceso();
            /* 
            listado_clientes();
            rec_per_ubic();
            muestra_autosPA();
            muestra_catMA();
            muestra_agMA(); */
        }

        function carga() {
            agencia.forEach(item => {var num = item; autos_PA(num);});
        }    

        function autos_PA(num) {
                switch(num) {
                    case 1:
                        autosPA[0]++;
                    break;

                    case 2: 
                        autosPA[1]++;
                    break;

                    case 3:
                        autosPA[2]++;
                    break;

                    case 4:
                        autosPA[3]++;
                    break;
                    
                    case 5:
                        autosPA[4]++;
                    break;
                    
                    default:
                    break;
                }
        }

        function proceso(){
            var cod = parseInt(prompt('Enter the car code: ',''));
            var nc = parseInt(prompt('Enter the number client: ',''));
            let day = parseInt(prompt('Enter the rental-start date ',''));
            var kmr = parseInt(prompt('Enter the kilometers traleved: ',''));

                var index = buscar(cod);
                var costo = calculocosto(kmr,index);
                document.write('El costo fue: ',costo);
                document.write("<br />");
                acum_ubicaciones(costo,index);
                
                for (i=0;i<3;i++){
                    document.write(recaud[i]);
                    document.write("<br />");
                }
        
        }

        function buscar(c){
            let encontrado = false;
            let i = 0;

            while ((encontrado == false) && (i<codigos.length)) {
                if (codigos[i] == c) {
                    encontrado = true;
                    var r = i;
                }
                else {
                    i++;
                }
            }
            return r;
        }

        function calculocosto(kmr,index) {
            P = (kmr * ppkm[index]);
            return P;
        }

        function acum_ubicaciones(c,i) {
            let ub = buscar_ub(i);
            recaud[ub-1]+=c;
        }

        function buscar_ub(i) {
                return ubicacion[agencia[i]-1];
        }

        /*
        var cod = parseInt(prompt('Enter the car-code: ',''));
        
        function buscarCodigo(cod) {
            return codigos.includes(cod);
        }

        let I = buscarCodigo(cod);
        if (I == true){
            document.write('Indeed the element: ',cod,' is in the array!');
            document.write("<br />");
        }

        request();

        function request(){
            var q = prompt('Do you want to add a new car code? (y/n)','');
            if ( (q=='y') ||(q== 'yes') ){
                var newElement = parseInt(prompt('Enter the car code',''));
                codigos.push(newElement);
                codigos.forEach(item => {document.write(item); document.write("<br />");} );
            }
        }
        */
    </script>
</body>
</html>